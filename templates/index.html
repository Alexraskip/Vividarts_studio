<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>VividArt Studios - Photography</title>
    <meta content="" name="description">
    <meta content="" name="author">
    <meta content="" name="keywords">
    <meta content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport">
    <link href="{{ url_for('static', filename='css/plugins.css') }}" media="all" rel="stylesheet" type="text/css">
    <link href="{{ url_for('static', filename='css/style.css') }}" media="all" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Poppins:400,400i,500,500i,600,600i,700,700i,800,800i,900,900i%7CRacing+Sans+One" rel="stylesheet" type="text/css">
    <style>
        .button-container {
            margin-top: 10px;
        }

        .button-container input[type="submit"],
        .button-container a.btn {
            width: 100%; /* Change width to 100% for both buttons */
        }
    </style>
</head>
<body>
    <div class="preloader-bg"></div>
    <div id="preloader">
        <div id="preloader-status">
            <div class="preloader-position loader">
                <span></span>
            </div>
        </div>
    </div>
    <a class="logo element-color-switch">
        <div class="logo-img fadeIn-element"></div>
    </a>
    <div class="menu-trigger navigation-icon fadeIn-element" id="menu-mobile-btn">
        <button class="lines-button minus menu-toggle" id="menu-mobile-caller" type="button"><span class="lines inverse"></span></button>
    </div>
    <div id="ui-layer">
        <div id="menu-wrapper">
            <div id="menu-mobile">
                <div class="menu-nav-wrapper">
                    <nav class="menu-nav">
                        <ul>
                            <li><a class="menu-state active" href="#home">Home</a></li>
                            <li><a class="menu-state" href="#app">Application</a></li>
                            <li class="credits" style="padding-top: 50px;">
                                <a href="https://azubiafrica.org" style="color:blue">Azubi Africa Cloud Engineering</a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </div>
    <div id="fullpage">
        <div class="section overlay overlay-dark-60" id="section0">
            <div class="vertical-lines-wrapper fadeIn-element">
                <div class="vertical-lines"></div>
            </div>
            <div class="section-title section-title-home fadeIn-element">
                <div class="section-title-heading section-title-heading-home">VividArt Studios</div>
            </div>
            <div class="section-bg-home"></div>
            <div class="bottom-credits fadeIn-element">
                <a class="link-underline-home" href="#">VividArt Studios</a> &copy; 
                <script>document.write(new Date().getFullYear())</script>
                All Rights Reserved.
            </div>
            <div class="social-icons-wrapper fadeIn-element">
                <p>Created by Kali Group 1:</p>
            </div>
            <div class="scroll-indicator fadeIn-element">
                <div class="scroll-indicator-wrapper">
                    <div class="scroll-line"></div>
                </div>
            </div>
        </div>
        <div class="section" id="app">
            <div class="section-title section-title-left">
                <div class="section-title-heading">Editor</div>
            </div>
            <div class="container-fluid sections">
                <div class="row">
                    <div class="col-md-6 col-sm-6 col-sm-push-6 nopadding">
                        <div class="contact-container element-color-switch-reverse contact-reset">
                            <div class="center-container">
                                <div class="center-block">
                                    <div class="contact-content contact-content-light">
                                        <div class="contact-content-inner">
                                            <h2 class="section-subheading section-subheading-about section-subheading-dark">
                                                <span>Upload and Transform</span>
                                            </h2>
                                            <div class="inner-divider-half"></div>
                                            <h2 class="section-heading section-heading-about section-heading-dark">
                                                Capture the Vivid Moments.
                                            </h2>
                                            <div class="inner-divider"></div>
                                            <div class="contact-txt contact-txt-dark">
                                                <p>Ready to embark on a visual journey? Use our intuitive upload section to submit your photos, and let our new processing tool work its magic. Unleash the full potential of your images with dynamic filters and collaborative features, curated to bring your artistic vision to life.</p>
                                            </div>
                                            <div class="inner-divider"></div>
                                            <div class="contact-txt contact-txt-dark">
                                                <div class="inner-divider"></div>
                                                <div class="contact-modal-launcher-wrapper">
                                                    <div class="the-button contact-modal-launcher">Click Here</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-sm-6 col-sm-pull-6 nopadding">
                        <div class="overlay overlay-inverse-dark-35">
                            <div class="contact-bg-wrapper">
                                <div class="contact-bg"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="contact-modal">
                <div class="container">
                    <div class="center-container-contact-modal">
                        <div class="center-block-contact-modal">
                            <div class="row">
                                <div class="col-lg-12">
                                    <div class="contact-content-inner-modal">
                                        <div id="contact-form">
                                            <form id="upload-form" action="/upload" method="post" enctype="multipart/form-data" accept="image/*" required>
                                                <p class="card-text">Choose a file to upload it to AWS S3</p>
                                                <input type="file" name="file" accept="image/*" required>
                                                <hr>
                                                <div class="button-container">
                                                    <input id="upload-button" type="submit" value="Upload" class="btn btn-success">
                                                    <div id="upload-success-message" class="text-success" style="display: none;">File Uploaded successfully</div>
                                                    <div id="upload-error-message" class="text-danger" style="display: none;">Error: Please select a file with one of the allowed extensions: png, jpg, jpeg, gif, tiff, bmp, svg, webp, heic, heif, raw, psd, eps</div>
                                                    <a id="download-button" class="btn btn-primary" href="#" style="display: none; height: auto; line-height: 1.5; padding: 10px 20px;" disabled>
                                                        Photo Processing Completed, Click Here to Download
                                                    </a>
                                                    <!-- Add a div to display the processing completion message -->
                                                    <div id="processing-completed-message" style="display: none;"></div>
                                                </div>
                                            </form>
                                        </div>
                                        <div class="inner-divider"></div>
                                        <div class="contact-modal-closer">
                                            <span class="ion-close"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/plugins.js') }}"></script> 
    <script src="{{ url_for('static', filename='js/wylex.js') }}"></script>
    <script>
        // Function to validate file extension
        function validateFileExtension() {
            const allowedExtensions = ['png', 'jpg', 'jpeg', 'gif', 'tiff', 'bmp', 'svg', 'webp', 'heic', 'heif', 'raw', 'psd', 'eps'];
            const fileInput = document.querySelector('input[type="file"]');
            const fileName = fileInput.value.toLowerCase();
            const extension = fileName.split('.').pop();

            if (!allowedExtensions.includes(extension)) {
                const errorMessage = document.getElementById('upload-error-message');
                const uploadButton = document.getElementById('upload-button');
                errorMessage.textContent = 'Error: Please select a file with one of the allowed extensions: png, jpg, jpeg, gif, tiff, bmp, svg, webp, heic, heif, raw, psd, eps';
                errorMessage.style.display = 'block';
                fileInput.value = ''; // Clear the file input
                uploadButton.disabled = true; // Disable the upload button
                return false;
            } else {
                const errorMessage = document.getElementById('upload-error-message');
                const uploadButton = document.getElementById('upload-button');
                errorMessage.style.display = 'none';
                uploadButton.disabled = false;
                return true;
            }
        }

        document.querySelector('input[type="file"]').addEventListener('change', validateFileExtension);

        document.getElementById('upload-form').addEventListener('submit', function(event) {
            if (!validateFileExtension()) {
                event.preventDefault();
            }
        });

        document.getElementById('upload-form').addEventListener('reset', function() {
            const fileInput = document.querySelector('input[type="file"]');
            const errorMessage = document.getElementById('upload-error-message');
            const successMessage = document.getElementById('upload-success-message');
            const uploadButton = document.getElementById('upload-button');
            fileInput.value = ''; // Clear the file input
            errorMessage.style.display = 'none'; // Hide the error message
            successMessage.style.display = 'none'; // Hide the success message
            uploadButton.disabled = false; // Enable the upload button
        });

        document.getElementById('download-button').addEventListener('click', function() {
            this.disabled = true;
            // Perform download action
        });

        // Function to display processing completion message
        function displayProcessingCompletionMessage(filename, msg, presigned_url) {
            const messageContainer = document.getElementById('processing-completed-message');
            messageContainer.innerHTML = `<p><strong>File Processing Completed!</strong></p><p>Filename: ${filename}</p><p>Presigned URL: <a href="${presigned_url}" target="_blank">${presigned_url}</a></p>`;
            messageContainer.style.display = 'block';
            // Open a new tab with the upload page
            window.open('/upload-page/' + filename, '_blank');
        }

        // Example usage:
        // const response = {
        //     "filename": "pexels-pixabay-60597.jpg",
        //     "msg": "File Processing Completed!",
        //     "presigned_url": "https://modified-photo.s3.amazonaws.com/modified-photo/pexels-pixabay-60597.jpg?AWSAccessKeyId=AKIAVDWFXDNUIMGQOVTU&Signature=SA0IuQIxILLQ8o%2BByAj%2B06BjczY%3D&Expires=1713182561"
        // };
        // displayProcessingCompletionMessage(response.filename, response.msg, response.presigned_url);
    </script>
</body>
</html>
